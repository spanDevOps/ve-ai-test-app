<!DOCTYPE html>
<html>
<head>
    <title>Workspace Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .debug-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }
        .debug-info h3 {
            margin-top: 0;
        }
    </style>
</head>
<body>
    <h1>Workspace Test Page</h1>
    <div id="workspace-info">Loading workspace info...</div>

    <div class="debug-info">
        <h3>Debug Information</h3>
        <div id="debug-info">Loading debug info...</div>
    </div>

    <script>
        async function getDebugHeaders() {
            try {
                const response = await fetch('/');
                const workspaceId = response.headers.get('x-debug-workspace');
                const originalHost = response.headers.get('x-debug-original-host');

                // Update page title with workspace ID
                if (workspaceId) {
                    document.title = `Workspace ${workspaceId}`;
                }

                // Update workspace info
                document.getElementById('workspace-info').textContent = 
                    workspaceId ? `Current Workspace: ${workspaceId}` : 'No workspace ID found';

                // Display debug info
                const debugInfo = {
                    'Amplify Host': window.location.host,
                    'Original Domain': originalHost || 'Not available',
                    'Workspace ID': workspaceId || 'Not available'
                };

                document.getElementById('debug-info').innerHTML = 
                    Object.entries(debugInfo)
                        .map(([key, value]) => `<div><strong>${key}:</strong> ${value}</div>`)
                        .join('');

            } catch (error) {
                console.error('Error fetching debug headers:', error);
                document.getElementById('workspace-info').textContent = 'Error loading workspace info';
                document.getElementById('debug-info').textContent = 'Error loading debug info';
            }
        }

        // Fetch debug headers when page loads
        getDebugHeaders();
    </script>
</body>
</html>
